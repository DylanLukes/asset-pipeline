// Generated by CoffeeScript 1.2.1-pre
(function() {
  var Path, fs, make_directories;

  Path = require('path');

  fs = require('fs');

  make_directories = function make_directories(dest, cb) {
    var dir;
    dir = Path.dirname(dest);
    if (dir === '.' || dir === '..') return cb();
    return fs.mkdir(dir, function(err) {
      if ((err != null ? err.code : void 0) === 'ENOENT') {
        return make_directories(dir, function() {
          return fs.mkdir(dir, cb);
        });
      } else {
        return cb();
      }
    });
  };

  module.exports.write_file = function write_file(dest, data, cb) {
    return fs.writeFile(dest, data, function(err) {
      if ((err != null ? err.code : void 0) === 'ENOENT') {
        return make_directories(dest, function() {
          return fs.writeFile(dest, data, cb);
        });
      } else {
        return cb(err);
      }
    });
  };

}).call(this);
